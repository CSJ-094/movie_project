# ì˜í™”ê´€ ì˜ˆë§¤ ì‹œìŠ¤í…œ êµ¬ì¶• ìˆœì„œë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         í˜„ì¬ ìƒíƒœ (2025-12-05)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… MySQL DB: theater(21) + screen(67) + showtime(ë¹ˆ) + booking(ë¹ˆ)  â”‚
â”‚ âœ… Elasticsearch: ì˜í™” ë°ì´í„° (is_now_playing í•„ë“œ í¬í•¨)              â”‚
â”‚ âœ… Backend: Spring Boot ì‹¤í–‰ ì¤‘ (í¬íŠ¸ 8484)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 1: ìƒì˜ ì‹œê°„í‘œ ë°ì´í„° ìƒì„±                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ generate_showtimes.py ì‘ì„±                                        â”‚
â”‚    â”œâ”€ Elasticsearch ì—°ê²° (localhost:9200)                           â”‚
â”‚    â”œâ”€ is_now_playing: true ì˜í™” ì¡°íšŒ (10ê°œ)                         â”‚
â”‚    â”œâ”€ ê° ì˜í™”ì˜ movieId, runtime ì¶”ì¶œ                                â”‚
â”‚    â”œâ”€ MySQL ì—°ê²° (atom DB)                                          â”‚
â”‚    â”œâ”€ screen í…Œì´ë¸”ì—ì„œ 67ê°œ ìƒì˜ê´€ ID ì¡°íšŒ                           â”‚
â”‚    â””â”€ ì‹œê°„í‘œ ìƒì„± ë¡œì§:                                              â”‚
â”‚       â€¢ ê¸°ê°„: 2025-12-05 ~ 2025-12-11 (7ì¼)                        â”‚
â”‚       â€¢ ì‹œê°„ëŒ€: 09:00, 10:30, 12:00, ... 22:30                     â”‚
â”‚       â€¢ ì˜í™”ë‹¹ 3~8ê°œ ìƒì˜ê´€ ëœë¤ ë°°ì •                                 â”‚
â”‚       â€¢ end_time = start_time + runtime + 30ë¶„                     â”‚
â”‚       â€¢ price: STANDARD=12000, IMAX/4DX/DOLBY=15000               â”‚
â”‚       â€¢ available_seats: 240 (ì´ˆê¸°ê°’)                               â”‚
â”‚                                                                     â”‚
â”‚ ğŸš€ ì‹¤í–‰: python generate_showtimes.py                               â”‚
â”‚ ğŸ“Š ê²°ê³¼: showtime í…Œì´ë¸”ì— ì•½ 1,750ê°œ ë ˆì½”ë“œ INSERT                   â”‚
â”‚                                                                     â”‚
â”‚ âœ… ê²€ì¦ ì¿¼ë¦¬:                                                        â”‚
â”‚    SELECT COUNT(*) FROM showtime;                                  â”‚
â”‚    SELECT movie_id, COUNT(*) FROM showtime GROUP BY movie_id;      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 2: JPA Entity í´ë˜ìŠ¤ ìƒì„±                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ backend/src/main/java/com/boot/entity/                          â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ Theater.java                                                     â”‚
â”‚    @Entity @Table(name="theater")                                  â”‚
â”‚    â”œâ”€ Long id (PK)                                                 â”‚
â”‚    â”œâ”€ String name, chain, region, city, address                   â”‚
â”‚    â”œâ”€ Double latitude, longitude                                  â”‚
â”‚    â””â”€ @OneToMany List<Screen> screens                             â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ Screen.java                                                      â”‚
â”‚    @Entity @Table(name="screen")                                   â”‚
â”‚    â”œâ”€ Long id (PK)                                                 â”‚
â”‚    â”œâ”€ @ManyToOne Theater theater                                   â”‚
â”‚    â”œâ”€ String name, screenType                                      â”‚
â”‚    â”œâ”€ Integer totalSeats                                           â”‚
â”‚    â””â”€ @OneToMany List<Showtime> showtimes                         â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ Showtime.java                                                    â”‚
â”‚    @Entity @Table(name="showtime")                                 â”‚
â”‚    â”œâ”€ Long id (PK)                                                 â”‚
â”‚    â”œâ”€ String movieId (Elasticsearch ì°¸ì¡°)                           â”‚
â”‚    â”œâ”€ @ManyToOne Screen screen                                     â”‚
â”‚    â”œâ”€ LocalDateTime startTime, endTime                             â”‚
â”‚    â”œâ”€ Integer price, availableSeats                                â”‚
â”‚    â””â”€ @OneToMany List<Booking> bookings                           â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ Booking.java                                                     â”‚
â”‚    @Entity @Table(name="booking")                                  â”‚
â”‚    â”œâ”€ Long id (PK)                                                 â”‚
â”‚    â”œâ”€ @ManyToOne User user (FK)                                    â”‚
â”‚    â”œâ”€ @ManyToOne Showtime showtime                                 â”‚
â”‚    â”œâ”€ String seats ("A1,A2,A3")                                    â”‚
â”‚    â”œâ”€ Integer seatCount, totalPrice                                â”‚
â”‚    â””â”€ String bookingStatus (CONFIRMED, CANCELLED)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STEP 3: Repository ì¸í„°í˜ì´ìŠ¤ ìƒì„±                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ backend/src/main/java/com/boot/repository/                      â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ TheaterRepository.java extends JpaRepository                     â”‚
â”‚    â”œâ”€ List<Theater> findByRegion(String region)                   â”‚
â”‚    â””â”€ List<Theater> findByChain(String chain)                     â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ ScreenRepository.java extends JpaRepository                      â”‚
â”‚    â”œâ”€ List<Screen> findByTheaterId(Long theaterId)                â”‚
â”‚    â””â”€ List<Screen> findByScreenType(String screenType)            â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ ShowtimeRepository.java extends JpaRepository                    â”‚
â”‚    â”œâ”€ List<Showtime> findByMovieId(String movieId)                â”‚
â”‚    â”œâ”€ List<Showtime> findByScreenIdAndStartTimeBetween(...)       â”‚
â”‚    â””â”€ List<Showtime> findByStartTimeAfter(LocalDateTime now)      â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ BookingRepository.java extends JpaRepository                     â”‚
â”‚    â”œâ”€ List<Booking> findByUserId(Long userId)                     â”‚
â”‚    â””â”€ List<Booking> findByShowtimeId(Long showtimeId)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       STEP 4: DTO í´ë˜ìŠ¤ ìƒì„±                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ backend/src/main/java/com/boot/dto/                             â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ ShowtimeResponseDTO.java                                         â”‚
â”‚    {                                                                â”‚
â”‚      "showtimeId": 1,                                               â”‚
â”‚      "movieId": "tmdb_12345",                                       â”‚
â”‚      "movieTitle": "ë²”ì£„ë„ì‹œ4",    â† Elasticsearch ì¡°íšŒ               â”‚
â”‚      "runtime": 109,                                                â”‚
â”‚      "posterPath": "/abc.jpg",                                      â”‚
â”‚      "theater": {                                                   â”‚
â”‚        "id": 43,                                                    â”‚
â”‚        "name": "CGV ì„œë©´",                                          â”‚
â”‚        "region": "ë¶€ì‚°"                                             â”‚
â”‚      },                                                             â”‚
â”‚      "screen": {                                                    â”‚
â”‚        "id": 1,                                                     â”‚
â”‚        "name": "IMAX"                                               â”‚
â”‚      },                                                             â”‚
â”‚      "startTime": "2025-12-05T14:30:00",                           â”‚
â”‚      "price": 15000,                                                â”‚
â”‚      "availableSeats": 240                                          â”‚
â”‚    }                                                                â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ BookingRequestDTO.java                                           â”‚
â”‚    {                                                                â”‚
â”‚      "userId": 1,                                                   â”‚
â”‚      "showtimeId": 123,                                             â”‚
â”‚      "seats": ["A1", "A2", "A3"],                                   â”‚
â”‚      "totalPrice": 45000                                            â”‚
â”‚    }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      STEP 5: Service ê³„ì¸µ êµ¬í˜„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ backend/src/main/java/com/boot/service/                         â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ TheaterService.java                                              â”‚
â”‚    â”œâ”€ getAllTheaters() â†’ List<Theater>                            â”‚
â”‚    â”œâ”€ getTheatersByRegion(region) â†’ List<Theater>                 â”‚
â”‚    â””â”€ getTheatersByChain(chain) â†’ List<Theater>                   â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ ShowtimeService.java â­ í•µì‹¬                                      â”‚
â”‚    â”œâ”€ getShowtimesByMovie(movieId)                                 â”‚
â”‚    â”‚   â”œâ”€ ShowtimeRepository.findByMovieId(movieId)               â”‚
â”‚    â”‚   â”œâ”€ Elasticsearchì—ì„œ ì˜í™” ì •ë³´ ì¡°íšŒ                          â”‚
â”‚    â”‚   â””â”€ DTO ê²°í•© í›„ ë°˜í™˜                                          â”‚
â”‚    â”‚                                                                â”‚
â”‚    â”œâ”€ getShowtimesByTheater(theaterId, date)                       â”‚
â”‚    â”‚   â”œâ”€ ScreenRepository.findByTheaterId(theaterId)             â”‚
â”‚    â”‚   â”œâ”€ ShowtimeRepositoryì—ì„œ ë‚ ì§œë³„ ì¡°íšŒ                        â”‚
â”‚    â”‚   â””â”€ ì˜í™” ì •ë³´ ê²°í•©                                            â”‚
â”‚    â”‚                                                                â”‚
â”‚    â””â”€ getShowtimeDetail(showtimeId)                                â”‚
â”‚        â”œâ”€ Showtime + Screen + Theater ì¡°ì¸                         â”‚
â”‚        â””â”€ Elasticsearch ì˜í™” ì •ë³´ ì¶”ê°€                              â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ BookingService.java                                              â”‚
â”‚    â”œâ”€ createBooking(BookingRequestDTO)                             â”‚
â”‚    â”‚   â”œâ”€ Showtime ì¡°íšŒ                                            â”‚
â”‚    â”‚   â”œâ”€ availableSeats ì²´í¬ (ì¢Œì„ ë¶€ì¡± ì‹œ ì˜ˆì™¸)                   â”‚
â”‚    â”‚   â”œâ”€ Booking ì—”í‹°í‹° ìƒì„± ë° ì €ì¥                               â”‚
â”‚    â”‚   â”œâ”€ availableSeats ì°¨ê° (UPDATE showtime)                    â”‚
â”‚    â”‚   â””â”€ @Transactional ë³´ì¥                                      â”‚
â”‚    â”‚                                                                â”‚
â”‚    â””â”€ getUserBookings(userId) â†’ List<BookingResponseDTO>           â”‚
â”‚        â””â”€ Booking + Showtime + Theater + ì˜í™”ì •ë³´ ê²°í•©              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     STEP 6: Controller êµ¬í˜„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ backend/src/main/java/com/boot/controller/                      â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ TheaterController.java                                           â”‚
â”‚    GET  /api/theaters                    â†’ ì „ì²´ ì˜í™”ê´€ ëª©ë¡          â”‚
â”‚    GET  /api/theaters?region=ë¶€ì‚°         â†’ ì§€ì—­ë³„ í•„í„°             â”‚
â”‚    GET  /api/theaters?chain=CGV          â†’ ì²´ì¸ë³„ í•„í„°              â”‚
â”‚    GET  /api/theaters/{id}/screens       â†’ ìƒì˜ê´€ ëª©ë¡              â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ ShowtimeController.java                                          â”‚
â”‚    GET  /api/showtimes?movieId=tmdb_123  â†’ ì˜í™”ë³„ ì‹œê°„í‘œ            â”‚
â”‚    GET  /api/showtimes?theaterId=43&date=2025-12-05 â†’ ì˜í™”ê´€ë³„     â”‚
â”‚    GET  /api/showtimes/{id}              â†’ ì‹œê°„í‘œ ìƒì„¸              â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ BookingController.java                                           â”‚
â”‚    POST /api/bookings                    â†’ ì˜ˆë§¤ ìƒì„±                â”‚
â”‚    GET  /api/users/{userId}/bookings     â†’ ì‚¬ìš©ì ì˜ˆë§¤ ë‚´ì—­          â”‚
â”‚    GET  /api/bookings/{id}               â†’ ì˜ˆë§¤ ìƒì„¸                â”‚
â”‚    DELETE /api/bookings/{id}             â†’ ì˜ˆë§¤ ì·¨ì†Œ (ì„ íƒ)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      STEP 7: API í…ŒìŠ¤íŠ¸                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”§ Postman / Thunder Client ì‚¬ìš©                                    â”‚
â”‚                                                                     â”‚
â”‚ âœ… GET /api/theaters?region=ë¶€ì‚°                                     â”‚
â”‚    â†’ 21ê°œ ì˜í™”ê´€ ë°˜í™˜ í™•ì¸                                            â”‚
â”‚                                                                     â”‚
â”‚ âœ… GET /api/showtimes?movieId=tmdb_123                              â”‚
â”‚    â†’ í•´ë‹¹ ì˜í™”ì˜ ì‹œê°„í‘œ + ì˜í™”ê´€ ì •ë³´ ê²°í•© í™•ì¸                        â”‚
â”‚                                                                     â”‚
â”‚ âœ… POST /api/bookings                                                â”‚
â”‚    â†’ ì˜ˆë§¤ ìƒì„± í›„ available_seats ê°ì†Œ í™•ì¸                           â”‚
â”‚                                                                     â”‚
â”‚ âœ… GET /api/users/1/bookings                                         â”‚
â”‚    â†’ ì‚¬ìš©ìì˜ ì˜ˆë§¤ ëª©ë¡ + ì˜í™” ì •ë³´ ê²°í•© í™•ì¸                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STEP 8: React Frontend ì—°ë™ (ë‚˜ì¤‘ì—)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“„ ì˜í™” ìƒì„¸ í˜ì´ì§€ (MovieDetailPage.tsx)                            â”‚
â”‚    â”œâ”€ "ì˜ˆë§¤í•˜ê¸°" ë²„íŠ¼ ì¶”ê°€                                            â”‚
â”‚    â””â”€ í´ë¦­ ì‹œ â†’ /booking?movieId=xxx ì´ë™                           â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ ì˜ˆë§¤ í˜ì´ì§€ (BookingPage.tsx)                                     â”‚
â”‚    â”œâ”€ ì§€ì—­/ì²´ì¸ í•„í„° (ë¶€ì‚°, CGV/ë¡¯ë°/ë©”ê°€ë°•ìŠ¤)                         â”‚
â”‚    â”œâ”€ ë‚ ì§œ ì„ íƒ (7ì¼ì¹˜)                                              â”‚
â”‚    â”œâ”€ ì‹œê°„í‘œ ëª©ë¡ (ì˜í™”ê´€ë³„ ì‹œê°„ëŒ€)                                   â”‚
â”‚    â””â”€ ì‹œê°„ ì„ íƒ ì‹œ â†’ ì¢Œì„ ì„ íƒ í˜ì´ì§€ë¡œ ì´ë™                          â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ ì¢Œì„ ì„ íƒ í˜ì´ì§€ (SeatSelectionPage.tsx)                          â”‚
â”‚    â”œâ”€ A1~P15 ê·¸ë¦¬ë“œ UI (16í–‰ Ã— 15ì—´)                                â”‚
â”‚    â”œâ”€ ì˜ˆì•½ëœ ì¢Œì„ ë¹„í™œì„±í™” (DBì—ì„œ ì¡°íšŒ)                              â”‚
â”‚    â”œâ”€ ì„ íƒ ì¢Œì„ â†’ ["A1","A2","A3"]                                  â”‚
â”‚    â””â”€ POST /api/bookings ì „ì†¡                                       â”‚
â”‚                                                                     â”‚
â”‚ ğŸ“„ ì˜ˆë§¤ ë‚´ì—­ í˜ì´ì§€ (MyBookingsPage.tsx)                             â”‚
â”‚    â”œâ”€ GET /api/users/{userId}/bookings                             â”‚
â”‚    â””â”€ ì˜í™” í¬ìŠ¤í„° + ì˜í™”ê´€ + ì‹œê°„ + ì¢Œì„ í‘œì‹œ                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸ‰ ì™„ì„±!                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… ì˜í™” ì¡°íšŒ (Elasticsearch)                                         â”‚
â”‚ âœ… ìƒì˜ ì‹œê°„í‘œ ì¡°íšŒ (MySQL + Elasticsearch ê²°í•©)                      â”‚
â”‚ âœ… ì˜í™”ê´€/ì§€ì—­/ë‚ ì§œë³„ í•„í„°ë§                                           â”‚
â”‚ âœ… ì¢Œì„ ì„ íƒ ë° ì˜ˆë§¤                                                  â”‚
â”‚ âœ… ì‹¤ì‹œê°„ ì”ì—¬ ì¢Œì„ ê´€ë¦¬                                               â”‚
â”‚ âœ… ì‚¬ìš©ì ì˜ˆë§¤ ë‚´ì—­ ì¡°íšŒ                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•  ê²ƒ

**ìš°ì„ ìˆœìœ„ 1**: `etl/generate_showtimes.py` ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±

### Step 1.1: Python ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± (30ë¶„)
**íŒŒì¼**: `etl/generate_showtimes.py`
```python
# ê¸°ëŠ¥:
# 1. Elasticsearchì—ì„œ is_now_playing: trueì¸ ì˜í™” ì¡°íšŒ
# 2. ê° ì˜í™”ì˜ runtime(ìƒì˜ì‹œê°„) ì •ë³´ ê°€ì ¸ì˜¤ê¸°
# 3. 67ê°œ ìƒì˜ê´€ì— 7ì¼ì¹˜ ì‹œê°„í‘œ ëœë¤ ìƒì„±
# 4. MySQL showtime í…Œì´ë¸”ì— INSERT
```

**ìƒì„± ê·œì¹™**:
- ê¸°ê°„: ì˜¤ëŠ˜(12/5) ~ 12/11 (7ì¼)
- ì‹œê°„ëŒ€: 09:00 ~ 23:00
- ìƒì˜ ê°„ê²©: ì˜í™” runtime + 30ë¶„ ì²­ì†Œì‹œê°„
- ì˜í™”ë‹¹ ìƒì˜ê´€: ëœë¤ 3~8ê°œ ìƒì˜ê´€ ë°°ì •
- ê°€ê²©: 12,000ì› (ê¸°ë³¸) / 15,000ì› (IMAX, 4DX, DOLBY ë“±)

**ì˜ˆìƒ ë°ì´í„°ëŸ‰**: 
- ì˜í™” 10ê°œ Ã— í‰ê·  5ê°œ ìƒì˜ê´€ Ã— 7ì¼ Ã— í‰ê·  5íšŒ/ì¼ = **ì•½ 1,750ê°œ ì‹œê°„í‘œ**

---

### Step 1.2: ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ë° ê²€ì¦ (30ë¶„)
```bash
cd etl
python generate_showtimes.py
```

**ê²€ì¦ ì¿¼ë¦¬**:
```sql
-- ì´ ì‹œê°„í‘œ ê°œìˆ˜
SELECT COUNT(*) FROM showtime;

-- ì˜í™”ë³„ ì‹œê°„í‘œ ë¶„í¬
SELECT movie_id, COUNT(*) as showtime_count 
FROM showtime 
GROUP BY movie_id;

-- ë‚ ì§œë³„ ì‹œê°„í‘œ ê°œìˆ˜
SELECT DATE(start_time) as date, COUNT(*) 
FROM showtime 
GROUP BY DATE(start_time);
```

---

## ğŸ¯ Phase 2: Backend Entity & Repository êµ¬ì¶• (2-3ì‹œê°„)

### Step 2.1: Entity í´ë˜ìŠ¤ ìƒì„± (1ì‹œê°„)
**ìœ„ì¹˜**: `backend/src/main/java/com/boot/entity/`

1. **Theater.java**
   - @OneToMany screens
   - region, chain, address, latitude, longitude

2. **Screen.java**
   - @ManyToOne theater
   - @OneToMany showtimes
   - name, total_seats, screen_type

3. **Showtime.java**
   - @ManyToOne screen
   - movieId (VARCHAR, Elasticsearch ì°¸ì¡°)
   - startTime, endTime, price, availableSeats

4. **Booking.java**
   - @ManyToOne user (FK to User entity)
   - @ManyToOne showtime
   - seats (JSON string: "A1,A2,A3")
   - seatCount, totalPrice, bookingStatus

---

### Step 2.2: Repository ì¸í„°í˜ì´ìŠ¤ ìƒì„± (30ë¶„)
**ìœ„ì¹˜**: `backend/src/main/java/com/boot/repository/`

```java
// TheaterRepository.java
List<Theater> findByRegion(String region);
List<Theater> findByChain(String chain);

// ScreenRepository.java
List<Screen> findByTheaterId(Long theaterId);
List<Screen> findByScreenType(String screenType);

// ShowtimeRepository.java
List<Showtime> findByMovieId(String movieId);
List<Showtime> findByScreenIdAndStartTimeBetween(Long screenId, LocalDateTime start, LocalDateTime end);
List<Showtime> findByStartTimeAfter(LocalDateTime now);

// BookingRepository.java
List<Booking> findByUserId(Long userId);
List<Booking> findByShowtimeId(Long showtimeId);
```

---

## ğŸ¯ Phase 3: Service & Controller êµ¬ì¶• (3-4ì‹œê°„)

### Step 3.1: DTO í´ë˜ìŠ¤ ìƒì„± (1ì‹œê°„)
**ìœ„ì¹˜**: `backend/src/main/java/com/boot/dto/`

```java
// ShowtimeResponseDTO.java
{
  "showtimeId": 1,
  "movieId": "tmdb_12345",
  "movieTitle": "ë²”ì£„ë„ì‹œ4",  // Elasticsearchì—ì„œ ì¡°íšŒ
  "runtime": 109,
  "posterPath": "/abc.jpg",
  "theater": {
    "id": 43,
    "name": "CGV ì„œë©´",
    "region": "ë¶€ì‚°",
    "address": "..."
  },
  "screen": {
    "id": 1,
    "name": "IMAX",
    "screenType": "IMAX"
  },
  "startTime": "2025-12-05T14:30:00",
  "endTime": "2025-12-05T16:19:00",
  "price": 15000,
  "availableSeats": 240,
  "totalSeats": 240
}
```

---

### Step 3.2: Service ê³„ì¸µ êµ¬í˜„ (1.5ì‹œê°„)
**ìœ„ì¹˜**: `backend/src/main/java/com/boot/service/`

1. **TheaterService.java**
   - `getAllTheaters()` - ì „ì²´ ì˜í™”ê´€ ëª©ë¡
   - `getTheatersByRegion(region)` - ì§€ì—­ë³„ ì˜í™”ê´€
   - `getTheatersByChain(chain)` - ì²´ì¸ë³„ ì˜í™”ê´€

2. **ShowtimeService.java** â­ í•µì‹¬
   - `getShowtimesByMovie(movieId)` - ì˜í™”ë³„ ì‹œê°„í‘œ
   - `getShowtimesByTheater(theaterId, date)` - ì˜í™”ê´€ë³„ ì‹œê°„í‘œ
   - `getShowtimeDetail(showtimeId)` - ì‹œê°„í‘œ ìƒì„¸ (Elasticsearch ì˜í™” ì •ë³´ ê²°í•©)
   - `combineMovieAndShowtime()` - ì˜í™” ì •ë³´ + ì‹œê°„í‘œ í†µí•©

3. **BookingService.java**
   - `createBooking(userId, showtimeId, seats)` - ì˜ˆë§¤ ìƒì„±
   - `updateAvailableSeats(showtimeId, seatCount)` - ì¢Œì„ ì°¨ê°
   - `getUserBookings(userId)` - ì‚¬ìš©ì ì˜ˆë§¤ ë‚´ì—­

---

### Step 3.3: Controller êµ¬í˜„ (1ì‹œê°„)
**ìœ„ì¹˜**: `backend/src/main/java/com/boot/controller/`

```java
// TheaterController.java
GET  /api/theaters                    // ì „ì²´ ì˜í™”ê´€
GET  /api/theaters?region=ë¶€ì‚°         // ì§€ì—­ë³„
GET  /api/theaters?chain=CGV          // ì²´ì¸ë³„
GET  /api/theaters/{id}/screens       // ì˜í™”ê´€ì˜ ìƒì˜ê´€ ëª©ë¡

// ShowtimeController.java
GET  /api/showtimes?movieId=tmdb_123  // ì˜í™”ë³„ ì‹œê°„í‘œ
GET  /api/showtimes?theaterId=43&date=2025-12-05  // ì˜í™”ê´€ë³„
GET  /api/showtimes/{id}              // ì‹œê°„í‘œ ìƒì„¸

// BookingController.java
POST /api/bookings                    // ì˜ˆë§¤ ìƒì„±
GET  /api/users/{userId}/bookings     // ì‚¬ìš©ì ì˜ˆë§¤ ë‚´ì—­
GET  /api/bookings/{id}               // ì˜ˆë§¤ ìƒì„¸
```

---

## ğŸ¯ Phase 4: Frontend ì—°ë™ (ë‚˜ì¤‘ì—)

### Step 4.1: ì˜í™” ìƒì„¸ í˜ì´ì§€ì— "ì˜ˆë§¤" ë²„íŠ¼
- í´ë¦­ ì‹œ â†’ `/api/showtimes?movieId=xxx` í˜¸ì¶œ
- ì§€ì—­/ì²´ì¸ í•„í„°ë§ UI
- ë‚ ì§œ ì„ íƒ (7ì¼ì¹˜)

### Step 4.2: ì¢Œì„ ì„ íƒ í˜ì´ì§€
- A1~P15 ê·¸ë¦¬ë“œ UI (16í–‰ Ã— 15ì—´)
- ì„ íƒëœ ì¢Œì„ â†’ "A1,A2,A3" ë¬¸ìì—´ë¡œ ì „ì†¡
- `/api/bookings` POST ìš”ì²­

---

## ğŸ“Š ì˜ˆìƒ ì†Œìš” ì‹œê°„

| Phase | ì‘ì—… | ì˜ˆìƒ ì‹œê°„ |
|-------|------|----------|
| Phase 1 | ìƒì˜ ì‹œê°„í‘œ ë°ì´í„° ìƒì„± | 1-2ì‹œê°„ |
| Phase 2 | Entity & Repository | 2-3ì‹œê°„ |
| Phase 3 | Service & Controller | 3-4ì‹œê°„ |
| **í•©ê³„** | **Backend ì™„ì„±** | **6-9ì‹œê°„** |
| Phase 4 | Frontend (ë‚˜ì¤‘ì—) | 4-6ì‹œê°„ |

---

## ğŸš€ ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•  ê²ƒ

**ìš°ì„ ìˆœìœ„ 1**: `etl/generate_showtimes.py` ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- Elasticsearch ì—°ê²°
- is_now_playing: trueì¸ ì˜í™” ì¡°íšŒ
- 7ì¼ì¹˜ ì‹œê°„í‘œ ìƒì„±
- MySQL INSERT

ì´ ìŠ¤í¬ë¦½íŠ¸ë¶€í„° ë§Œë“¤ê¹Œìš”? ğŸ¬
